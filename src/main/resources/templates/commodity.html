<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
		<title>发布商品</title>
		<link rel="stylesheet" href="//cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" href="../static/secmarket/css/index.css" th:href="@{/secmarket/css/index.css}"/>
		<link rel="stylesheet" href="../static/secmarket/css/public.css" th:href="@{/secmarket/css/public.css}"/>
		<link rel="stylesheet" href="../static/secmarket/css/commodity.css" th:href="@{/secmarket/css/commodity.css}"
		<script src="//cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
		<script src="//cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
	</head>
	<body>
		<div class="headmenu">
			<div class="head">
				<ul style="margin-left: 11.5%">
					<li style="width: 4%;"><a href="#" class="li-1">登陆</a></li>
					<li style="width: 4%;"><a href="#" class="li-1">注册</a></li>
				</ul>
				<div class="searchbar">
					<input type="text" placeholder="搜索..."/>
				</div>
				<ul style="margin-left:65%;">
					<li>二手</li>
					<li>跑腿</li>
					<li class="submenu">
						<span>收藏夹</span>
						<ul>
							<li><a href="#">收藏的宝贝</a></li>
							<li><a href="#">收藏的店家</a></li>
						</ul>
					</li>
					<li class="submenu">
						<span>联系客服</span>
						<ul>
							<li><a href="#">消费者客服</a></li>
							<li><a href="#">卖家客服</a></li>
						</ul>
					</li>
					<li class="submenu">
						<span>更多</span>
						<ul>
							<li><a href="#">服务中心</a></li>
							<li><a href="#">问题反馈</a></li>
							<li><a href="#">退出</a></li>
						</ul>
					</li>
					<li>消息</li>
				</ul>
			</div>
		</div>
		<hr style="height: 1px;background-color:#C1C1C1;margin-top: -5px;"/>
		<div class="container">
			<form>
				<div class="container-box">
					<div class="container-box-base">
						<span class="glyphicon glyphicon-align-justify" style="color: steelblue;"></span>
						<span style="margin:13px 0px;">基本信息</span>
						<div class="container-box-base-msg">
							<div>
								<p class="container-box-base-msg-text">购买方式:</p>
								<p><input type="checkbox" style="margin-left: 10px;margin-right: 3px;"/>平台自定义</p>
								<p><input type="checkbox" style="margin-left: 10px;margin-right: 3px;"/>外部链接</p>
							</div>
							<div>
								<p class="container-box-base-msg-text" style="margin-top: 13px;">商品分类:
									<select name="cars" style="color: #1A1A1A;font-size: 14px;font-weight: 400;margin: 2px 4px;width:100px;height: 24px;">
										<option value="volvo">电子产品</option>
										<option value="saab">手机</option>
										<option value="fiat">数码</option>
										<option value="audi">衣服</option>
										<option value="audi">书本</option>
										<option value="audi">书本</option>
										<option value="saab">手机</option>
										<option value="fiat">数码</option>
										<option value="audi">衣服</option>
										<option value="audi">书本</option>
										<option value="audi">书本</option>
									</select>
								</p>
							</div>
						</div>
					</div>
					<div class="container-box-msg">
						<span class="glyphicon glyphicon-align-justify" style="color: steelblue;"></span>
						<span style="margin:13px 0px;">商品信息</span>
						<div class="container-box-base-msg">
							<div>
								<p class="container-box-base-msg-text">商品名称:</p>
								<input type="text" placeholder="请输入商品标题..."  style="width: 600px;height: 34px;color: #1A1A1A;font-size: 14px;font-weight: 400;margin-top: -8px;margin-left: 10px;padding-left: 5px;"/>
							</div>
							<div style="margin-top: 24px;">
								<p class="container-box-base-msg-text" >商品简介:</p>
								<textarea style="width: 600px;height: 250px;color: #1A1A1A;font-size: 14px;font-weight: 400;margin-left: 10px;padding:5px;" placeholder="请输入商品简介..."></textarea>
							</div>
							<div style="margin-left: 29px;">
								<p class="container-box-base-msg-text" style="margin-top: 26px;">价格:</p>
								<p style="margin-top: 20px;"><input type="text"  style="width: 120px;height: 34px;color: #1A1A1A;font-size: 14px;font-weight: 400;margin-left: 10px;padding-left: 5px;margin-right: 10px;" placeholder="0.00"/>元</p>
							</div>
							<div style="margin-left: 29px;">
								<p class="container-box-base-msg-text" style="margin-top: 26px;">库存:</p>
								<p style="margin-top: 20px;"><input type="text"  style="width: 120px;height: 34px;color: #1A1A1A;font-size: 14px;font-weight: 400;margin-left: 10px;padding-left: 5px;margin-right: 10px;" placeholder="0"/>件</p>
							</div>
							<div>
								<p class="container-box-base-msg-text" style="margin-top:26px;">上传图片:</p>
								<input type="file" id="picFile" onchange="readFile(this)" style="float: left;margin-top: 26px;margin-left: 10px;color: #1A1A1A;font-size: 14px;"/> 
								<img style="border: 3px solid #C1C1C1;width: 170px;height: 170px;float: left;clear: both;margin-top: 24px;margin-left: 7%;" id="img" src="../static/secmarket/img/jia.png" alt="" th:src="@{/secmarket/img/jia.png}"/>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
		
		<div class="footer">
			<div class="footer_outer">
				<div class="footer_outer_list" style="margin-left: 7%;">
					<p style="margin-top: 20px;font-size: 16px;color: #333333;letter-spacing: 1px;font-weight: 600;">跑腿代购</p>
					<p>发布需求</p>
					<p>接单中心</p>
					<p>配送员认证</p>
					<p>个人中心</p>
				</div>
				<div class="footer_outer_list">
					<p style="margin-top: 20px;font-size: 16px;color: #333333;letter-spacing: 1px;font-weight: 600;">二手市场</p>
					<p>分类</p>
					<p>我的订单</p>
					<p>我的收藏</p>
					<p>个人中心</p>
				</div>
				<div class="footer_outer_list">
					<p style="margin-top: 20px;font-size: 16px;color: #333333;letter-spacing: 1px;font-weight: 600;">个人信息</p>
					<p>信息认证</p>
					<p>信息修改</p>
					<p>账号注销</p>
					<p>个人中心</p>
				</div>
		
				<div class="footer_outer_list">
					<p style="margin-top: 20px;font-size: 16px;color: #333333;letter-spacing: 1px;font-weight: 600;">订单中心</p>
					<p>我的订单</p>
					<p>我的物品</p>
					<p>我的接单</p>
					<p>个人中心</p>
				</div>
				<div class="footer_outer_list">
					<p style="margin-top: 20px;font-size: 16px;color: #333333;letter-spacing: 1px;font-weight: 600;">关注微信</p>
					<img src="../static/secmarket/img/007.png" th:src="@{/secmarket/img/007.png}"/>
				</div>
			</div>
		</div>
		
	</body>
	<script>
		function readFile(obj){ 
		   var file = obj.files[0];  
		   //判断类型是不是图片 
		    if(!/image\/\w+/.test(file.type)){ 
		      alert("请确保文件为图像类型"); 
		      return false; 
		    } 
		    var reader = new FileReader(); 
		    reader.readAsDataURL(file); 
		    reader.onload = function(e){
		     dealImage(this.result,{width:200},function(base){
		     　　　　document.getElementById('img').setAttribute('src',base)
		     });
		    } 
		  } 
		  
		  /**
		   * 图片压缩，默认同比例压缩
		   * @param {Object} path
		   * pc端传入的路径可以为相对路径，但是在移动端上必须传入的路径是照相图片储存的绝对路径
		   * @param {Object} obj
		   * obj 对象 有 width， height， quality(0-1)
		   * @param {Object} callback
		   * 回调函数有一个参数，base64的字符串数据
		   */
		  function dealImage(path, obj, callback){
		   var img = new Image();
		   img.src = path;
		   img.onload = function(){
		   var that = this;
		   // 默认按比例压缩
		   var w = that.width,
		   h = that.height,
		   scale = w / h;
		   w = obj.width || w;
		   h = obj.height || (w / scale);
		   var quality = 0.7; // 默认图片质量为0.7
		   //生成canvas
		   var canvas = document.createElement('canvas');
		   var ctx = canvas.getContext('2d');
		   // 创建属性节点
		   var anw = document.createAttribute("width");
		   anw.nodeValue = w;
		   var anh = document.createAttribute("height");
		   anh.nodeValue = h;
		   canvas.setAttributeNode(anw);
		   canvas.setAttributeNode(anh);
		   ctx.drawImage(that, 0, 0, w, h);
		   // 图像质量
		   if(obj.quality && obj.quality <= 1 && obj.quality > 0){
		   quality = obj.quality;
		   }
		   // quality值越小，所绘制出的图像越模糊
		   var base64 = canvas.toDataURL('image/jpeg', quality );
		   // 回调函数返回base64的值
		   callback(base64);
		   }
		  }
	</script>
</html>
